# VIBEUP Development Tracker - Progress Schema
# JSON Schema for progress.yaml validation
# Version: 1.0.0

$schema: "http://json-schema.org/draft-07/schema#"
$id: "https://vibeup.io/schemas/tracker/progress.schema.yaml"
title: "VIBEUP Development Progress"
description: "Master rollup tracking overall platform development progress"

type: object
required:
  - version
  - lastUpdated
  - platform
  - epics
  - tooling
  - activeWork

properties:
  version:
    type: string
    pattern: "^\\d+\\.\\d+(\\.\\d+)?$"
    description: "Schema version for migrations"
    
  lastUpdated:
    type: string
    format: date-time
    description: "ISO8601 timestamp of last update"
    
  lastCheckpoint:
    type: string
    description: "ID of most recent checkpoint"
    
  platform:
    type: object
    required:
      - name
      - totalEpics
      - completedEpics
      - inProgressEpics
      - overallPercentage
    properties:
      name:
        type: string
        const: "VIBEUP"
        
      totalEpics:
        type: integer
        minimum: 1
        description: "Total number of epics (11 for VIBEUP)"
        
      completedEpics:
        type: integer
        minimum: 0
        description: "Number of fully completed epics"
        
      inProgressEpics:
        type: integer
        minimum: 0
        description: "Number of epics currently being worked on"
        
      blockedEpics:
        type: integer
        minimum: 0
        description: "Number of epics blocked by dependencies"
        
      overallPercentage:
        type: number
        minimum: 0
        maximum: 100
        description: "Overall platform completion percentage"
        
      velocity:
        type: object
        properties:
          tasksCompletedToday:
            type: integer
            minimum: 0
          tasksCompletedThisWeek:
            type: integer
            minimum: 0
          averageTaskDuration:
            type: string
            pattern: "^\\d+[smh]$"
            description: "Average time per task (e.g., '18m', '2h')"
          estimatedCompletionDate:
            type: string
            format: date
          trend:
            type: string
            enum: ["accelerating", "stable", "decelerating"]
            
  epics:
    type: object
    description: "Epic-level rollup by epic ID"
    additionalProperties:
      type: object
      required:
        - status
        - percentage
      properties:
        status:
          type: string
          enum: ["not-started", "in-progress", "blocked", "complete"]
        percentage:
          type: number
          minimum: 0
          maximum: 100
        blockers:
          type: array
          items:
            type: string
          description: "Epic IDs that block this epic"
        currentFocus:
          type: string
          description: "Current feature being worked on"
        startedAt:
          type: string
          format: date-time
        completedAt:
          type: string
          format: date-time
          
  tooling:
    type: object
    required:
      - lastValidated
      - rulesLoaded
      - rulesApplied
      - coverageGate
    properties:
      lastValidated:
        type: string
        format: date-time
      rulesLoaded:
        type: integer
        minimum: 0
      rulesApplied:
        type: integer
        minimum: 0
      agentsAvailable:
        type: integer
        minimum: 0
      coverageGate:
        type: string
        enum: ["passing", "failing", "not-configured"]
      issues:
        type: array
        items:
          type: object
          properties:
            rule:
              type: string
            issue:
              type: string
            severity:
              type: string
              enum: ["warning", "error"]
              
  activeWork:
    type: object
    properties:
      cursor:
        type: object
        description: "Current interactive Cursor session"
        properties:
          currentEpic:
            type: string
          currentFeature:
            type: string
          currentTask:
            type: string
          startedAt:
            type: string
            format: date-time
      swarm:
        type: object
        description: "Current swarm execution"
        properties:
          executionId:
            type: string
          tasksRunning:
            type: integer
            minimum: 0
          tasksQueued:
            type: integer
            minimum: 0
          agents:
            type: array
            items:
              type: object
              properties:
                id:
                  type: string
                status:
                  type: string
                  enum: ["idle", "busy", "offline"]
                currentTask:
                  type: string

